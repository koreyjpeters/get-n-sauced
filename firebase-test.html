<!DOCTYPE html>
<html>
<head>
    <title>Firebase Config Test</title>
</head>
<body>
    <h1>Firebase Configuration Test</h1>
    <div id="output"></div>
    
    <script type="module">
        const output = document.getElementById('output');
        
        // Check environment variables
        const config = {
            apiKey: import.meta.env.VITE_FIREBASE_API_KEY,
            authDomain: import.meta.env.VITE_FIREBASE_AUTH_DOMAIN,
            projectId: import.meta.env.VITE_FIREBASE_PROJECT_ID,
            storageBucket: import.meta.env.VITE_FIREBASE_STORAGE_BUCKET,
            messagingSenderId: import.meta.env.VITE_FIREBASE_MESSAGING_SENDER_ID,
            appId: import.meta.env.VITE_FIREBASE_APP_ID,
            measurementId: import.meta.env.VITE_FIREBASE_MEASUREMENT_ID,
        };
        
        output.innerHTML = '<h2>Environment Variables:</h2><pre>' + 
            JSON.stringify(config, null, 2) + '</pre>';
        
        // Test Firebase initialization
        import('firebase/app').then(({ initializeApp }) => {
            import('firebase/firestore').then(({ getFirestore, collection, getDocs }) => {
                try {
                    const app = initializeApp(config);
                    const db = getFirestore(app);
                    
                    output.innerHTML += '<h2>✅ Firebase initialized successfully!</h2>';
                    output.innerHTML += '<p>Attempting to read from Firestore...</p>';
                    
                    // Try to read config
                    getDocs(collection(db, 'config')).then(snapshot => {
                        output.innerHTML += `<p>✅ Firestore read successful! Found ${snapshot.size} documents.</p>`;
                    }).catch(err => {
                        output.innerHTML += `<p>❌ Firestore read error: ${err.message}</p>`;
                        console.error('Firestore error:', err);
                    });
                    
                } catch (err) {
                    output.innerHTML += `<h2>❌ Firebase initialization error:</h2><pre>${err.message}</pre>`;
                    console.error('Firebase error:', err);
                }
            });
        }).catch(err => {
            output.innerHTML += `<h2>❌ Failed to load Firebase modules:</h2><pre>${err.message}</pre>`;
        });
    </script>
</body>
</html>
